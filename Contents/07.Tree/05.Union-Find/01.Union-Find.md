## 1. 并查集简介

### 1.1 并查集的定义

> **并查集（Union Find）**：一种树型的数据结构，用于处理一些不交集（Disjoint Sets）的合并及查询问题。不交集指的是一系列没有重复元素的集合。
>
> 并查集主要支持两种操作：
>
> - **合并（Union）**：将两个集合合并成一个集合。
> - **查找（Find）**：确定某个元素属于哪个集合。通常是返回集合内的一个「代表元素」。这个操作是为了判断两个元素是否属于同一个集合。

简单来说，并查集就是用来处理集合的合并和集合的查询。

并查集中的「集」指的就是我们初中所学的集合概念，在这里指的是不相交的集合，即一系列没有重复元素的集合。

并查集中的「并」指的就是集合的并集操作，将两个集合合并之后就变成一个集合，如下所示：

```Python
{1, 3, 5, 7} ∪ {2, 4, 6, 8} = {1, 2, 3, 4, 5, 6, 7, 8}
```

并查集中的「查」对于集合中存放的元素来说的，通常我们需要查询两个元素是否属于同一个集合中。

对于前一个查询操作，我们可以通过 `Python` 或其他语言中的 `set` 集合来解决。额后一个查询操作，则仅用一个 `set` 集合就很难做到了。

这就需要用到我们接下来要讲解的「并查集」结构。

根据上文描述，我们就可以定义一下「并查集」结构所支持的操作接口：

- **合并 `union(p, q)`**：将集合 `p` 和集合 `q` 合并成一个集合。
- **查找 `is_connected(p, q)`**：查询元素 `p` 和 `q` 是否在同一个集合中。

### 1.2 并查集的两种设计思想

#### 1.2.1 快速查询（Quick Find）

如果我们希望并查集的查询效率高一些，那么我们就可以侧重于查询操作。

我们可以使用数组结构来表示集合中的元素。然后将数组的索引值作为每个元素的集合编号，称为 `id`。

- 初始化时：所有元素的 `id` 不一样。代表每个元素单独属于一个集合。
- 合并操作时：需要将其中一个集合中的所有元素 `id` 更改为另一个集合中的 `id`，这样合并后一个集合中的所有元素 `id` 均相同。
- 查找操作时：如果两个元素的 `id` 一样，则说明它们属于同一个集合；如果两个元素的 `id` 不一样，则说明它们不属于同一个集合。

举个例子来说明一下，我们使用数组来表示一系列集合元素 `{0}, {1}, {2}, {3}, {4}, {5}, {6}, {7}`，初始化时如下图所示。从下图中可以看出：元素的集合编号就是数组的索引值，代表着每个元素属于一个集合。

![](https://qcdn.itcharge.cn/images/20220505145234.png)

当我们进行一系列的合并操作后，比如合并后变为 `{0}, {1, 2, 3}, {4}, {5, 6}, {7}`。合并操作后如下图所示，从图中可以看出下标为 `1`、`2`、`3` 的元素集合编号是一致的，说明这 `3` 个 元素同属于一个集合。同理下标为 `5` 和 `6` 的元素也同属于一个集合。

![](https://qcdn.itcharge.cn/images/20220505145302.png)

### 1.2.2 快速合并（Quick Union）

如果我们希望并查集的合并效率高一些，那么我们就可以侧重于合并操作。

我们可以使用树形结构来表示集合中的元素。

## 2. 路径压缩

## 3. 按秩合并

## 4. 并查集的应用

并查集通常用来求解不同元素之间的关系问题，比如判断两个人是否是亲戚关系、两个点之间时候存在至少一条路径连接。

## 参考资料

- 【博文】[并查集 - OI Wiki](https://oi-wiki.org/ds/dsu/)
- 【博文】[并查集 - LeetBook - 力扣](https://leetcode-cn.com/leetbook/detail/disjoint-set/)
- 【博文】[并查集概念及用法分析 - 掘金](https://juejin.cn/post/6844903954774491149)
- 【博文】[数据结构之并查集 - 端碗吹水的技术博客](https://blog.51cto.com/zero01/2609695)
- 【书籍】算法训练营 陈小玉 著
- 【书籍】算法竞赛进阶指南 - 李煜东 著
- 【书籍】算法竞赛入门经典：训练指南 - 刘汝佳，陈锋 著