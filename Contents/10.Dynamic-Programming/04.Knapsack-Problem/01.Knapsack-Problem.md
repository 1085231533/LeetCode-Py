## 1. 背包问题简介

### 1.1 背包问题的定义

> **背包问题**：背包问题是线性 DP 问题中一类经典而又特殊的模型。背包问题可以描述为：给定一组物品，每种物品都有自己的重量、价格以及数量。再给定一个最多能装重量为 $W$ 的背包。现在选择一些物品放入背包中，请问在总重量不超过背包装载重量上限的情况下，能装入背包的最大价值总合是多少？

根据物品限制条件的不同，背包问题可分为：0-1 背包问题、完全背包问题、多重背包问题、分组背包问题，以及混合背包问题等。

### 1.2 背包问题的暴力解题思路

背包问题的暴力解题思路比较简单。假设有 $n$ 件物品。我们先枚举出这 $n$ 件物品所有可能的组合。然后再对这些组合判断是否能放入背包，以及是否能得到最大价值。但是这种做法的时间复杂度是 $O(2^n)$，其中 $n$ 表示物品数量。

暴力解法的时间复杂度是指数级别的，但是我们可以利用动态规划算法减少一下时间复杂度。

## 2. 0-1 背包问题

> **0-1 背包问题**：有 $n$ 件物品和有一个最多能装重量为 $W$ 的背包。第 $i$ 件物品的重量为 $weight[i]$，价值为 $value[i]$，每件物品有且只有 $1$ 件。请问在总重量不超过背包装载重量上限的情况下，能装入背包的最大价值是多少？

### 2.1 0-1 背包问题基本思路

> **0-1 背包问题的特点**：每种物品有且仅有 $1$ 件，可以选择放入背包，也可以选择不放入背包。

#### 思路 1：动态规划

###### 1. 划分阶段

按照物品的序号进行阶段划分。

###### 2. 定义状态

定义状态 $dp[i][w]$ 表示为：前 $i$ 件物品放入一个最多能装重量为 $w$ 的背包中，可以获得的最大价值。

状态 $dp[i][w]$ 是一个二维数组，其中第一维代表「当前正在考虑的物品」，第二维表示「当前背包的装载重量上限」，二维数组值表示「可以获得的最大价值」。

###### 3. 状态转移方程

对于「将前 $i$ 件物品放入一个最多能装重量为 $w$ 的背包中，可以获得的最大价值 」这个子问题，如果我们只考虑第 $i$ 件物品的放入策略（放入背包和不放入背包两种策略）。则问题可以转换为一个只跟前 $i - 1$ 件物品相关的问题。

1. **如果第 $i$ 件物品不放入背包**：问题转换为「前 $i - 1$ 件物品放入一个最多能装重量为 $w$ 的背包中 ，可以获得的最大价值为 $dp[i - 1][w]$」。
2. **如果第 $i$ 件物品放入背包**：问题转换为「前 $i - 1$ 件物品放入一个最多能装重量为 $w - weight[i]$ 的背包中，可以获得的最大价值为 $dp[i - 1][w - weight[i]]$」」，再加上「放入的第 $i$ 件物品的价值 $value[i]$」，则此时可以获得的最大价值为 $dp[i - 1][w - weight[i]] + value[i]$。

当然第 $i$ 件物品能够放入背包的前提是：当前背包的装载重量上限 ≥ 第 $i$ 件物品的重量，即 $w \ge weight[i]$。

则状态转移方程为：

$dp[i][w] = max \begin{cases} dp[i - 1][w] & 第 i 件物品不放入背包 \cr dp[i - 1][w - weight[i]] + value[i] & 第 i 件物品放入背包 \end{cases}$

###### 4. 初始条件

- 如果背包容量为 $0$，则无论选取什么物品，可以获得的最大价值一定是 $0$，即 $dp[i][0] = 0$。
- 前 $0$ 件物品所能获得的最大价值一定为 $0$，即 $dp[0][w] = 0$。

###### 5. 最终结果

#### 思路 1：代码

```Python
class Solution:
    def zeroOnePack(self, weight: [int], value: [int], W: int):
        size = len(weight)
        dp = [[0 for _ in range(W + 1)] for _ in range(size + 1)]
        
        for i in range(1, size + 1):
            for w in range(weight[i], W + 1):
                dp[i][w] = max(dp[i - 1][w], dp[i - 1][w - weight[i]] + value)
                
        return dp[size]
```

#### 思路 1：复杂度分析

- **时间复杂度**：$O(n \times W)$，其中 $n$ 为物品数量，$W$ 为背包的装载重量上限。
- **空间复杂度**：$O(n \times W)$。

### 2.2 0-1 背包问题滚动数组优化



## 3. 完全背包问题

> **完全背包问题**：有 $n$ 种物品和一个最多能装重量为 $W$ 的背包，第 $i$ 件物品的重量为 $weight[i]$，价值为 $value[i]$，每种物品数量没有限制。请问在总重量不超过背包装载重量上限的情况下，能装入背包的最大价值是多少？

## 4. 多重背包问题

> **多重背包问题**：有 $n$ 种物品和一个最多能装重量为 $W$ 的背包，第 $i$ 种物品的重量为 $weight[i]$，价值为 $value[i]$，件数为 $count[i]$。请问在总重量不超过背包装载重量上限的情况下，能装入背包的最大价值是多少？

## 5. 分组背包问题

## 参考资料

- 【资料】[背包九讲 - 崔添翼](https://github.com/tianyicui/pack)
- 【文章】[背包 DP - OI Wiki](https://oi-wiki.org/dp/knapsack/)
