## [0337. 打家劫舍 III](https://leetcode-cn.com/problems/house-robber-iii/)

- 标签：树、深度优先搜索、动态规划、二叉树
- 难度：中等

## 题目大意

小偷发现了一个新的可行窃的地区，这个地区的形状是一棵二叉树。这个地区只有一个入口，称为「根」。除了「根」之外，每栋房子只有一个「父」房子与之相连。如果两个直接相连的房子在同一天被打劫，房屋将自动报警。

现在给定这个代表地区房间的二叉树，每个节点值代表该房间所拥有的金额。要求计算在不触动警报的情况下，小偷一晚上能盗取的最高金额。

## 解题思路

树形动态规划问题。





## 代码

```Python
class Solution:
    map = dict()
    def rob(self, root: TreeNode) -> int:
        if not root:
            return 0
        if not root.left and not root.right:
            return root.val
        if root in self.map:
            return self.map[root]

        val_steal = root.val
        if root.left:
            val_steal += self.rob(root.left.left) + self.rob(root.left.right)
        if root.right:
            val_steal += self.rob(root.right.left) + self.rob(root.right.right)
        val_no_steal = self.rob(root.left) + self.rob(root.right)
        self.map[root] = max(val_steal, val_no_steal)
        return self.map[root]
```

